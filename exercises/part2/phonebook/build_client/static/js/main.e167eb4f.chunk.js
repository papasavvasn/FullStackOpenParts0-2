(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,n,t){e.exports=t(41)},22:function(e,n,t){},40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(16),o=t.n(c),u=(t(22),t(6)),i=t(2),l=function(e){var n=e.addName,t=e.newName,a=e.handleNameChange,c=e.newNumber,o=e.handleNumberChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Add a new"),r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:t,onChange:a})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:c,onChange:o})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},m=function(e){var n=e.filter,t=e.handleFilterChange;return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:n,onChange:t}))},s=t(4),d=t.n(s),f="/api/persons",h=function(e){var n=e.name,t=e.number,a=e.id;return d.a.post(f,{name:n,number:t,id:a})},b=function(e){return d.a.delete("".concat(f,"/").concat(e))},v=function(){return d.a.get(f)},p=function(e){var n=e.name,t=e.number,a=e.id;return d.a.put("".concat(f,"/").concat(a),{number:t,name:n,id:a})},g=function(e){var n=e.persons,t=e.filter,a=e.setPersons,c=e.displayNotification;return r.a.createElement(r.a.Fragment,null,n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return r.a.createElement("p",{key:e.name},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return function(e){var t,r=e.id,o=e.name;window.confirm("Delete ".concat(null===(t=n.find((function(e){return e.id===r})))||void 0===t?void 0:t.name))&&b(r).then((function(e){200===e.status&&a(n.filter((function(e){return e.id!==r})))})).catch((function(){return c({message:"Information of ".concat(o," has already been removed from the server"),type:"error"})}))}(e)}},"Delete")," ")})))},E=(t(40),function(e){var n=e.message,t=e.type;return null===n?null:r.a.createElement("div",{className:t},n)}),w=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),s=Object(i.a)(o,2),d=s[0],f=s[1],b=Object(a.useState)(""),w=Object(i.a)(b,2),j=w[0],y=w[1],O=Object(a.useState)(""),N=Object(i.a)(O,2),C=N[0],k=N[1],S=Object(a.useState)(null),D=Object(i.a)(S,2),F=D[0],I=D[1],P=Object(a.useState)("success"),A=Object(i.a)(P,2),B=A[0],J=A[1];Object(a.useEffect)((function(){v().then((function(e){c(e.data)}))}),[]);var L=function(e){var n=e.message,t=e.type;J(t),I("".concat(n)),setTimeout((function(){I(null)}),5e3)},T={addName:function(e){e.preventDefault(),t.map((function(e){return e.name})).includes(d)?window.confirm("".concat(d," is already added to the phonebook, replace the old number with a new one"))&&p({number:j,id:t.find((function(e){return e.name===d})).id,name:d}).then((function(e){var n=e.status,a=e.data;200===n&&(c([].concat(Object(u.a)(t.filter((function(e){return e.id!==a.id}))),[a])),L({message:"Updated ".concat(a.name),type:"success"}))})).catch((function(){return L({message:"Information of ".concat(d," has already been removed from the server"),type:"error"})})):h({name:d,number:j,id:(new Date).getTime()+t.length+""}).then((function(e){var n=e.data;c([].concat(Object(u.a)(t),[{name:n.name,number:n.number,id:n.id}])),L({message:"Added ".concat(n.name),type:"success"})})),f(""),y("")},handleNameChange:function(e){f(e.target.value)},handleNumberChange:function(e){y(e.target.value)}};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(m,{filter:C,handleFilterChange:function(e){k(e.target.value)}}),r.a.createElement(E,{message:F,type:B}),r.a.createElement(l,Object.assign({newName:d,newNumber:j},T)),r.a.createElement(g,{filter:C,persons:t,setPersons:c,displayNotification:L}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.e167eb4f.chunk.js.map